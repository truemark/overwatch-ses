# Overwatch SES


## Overview
A CDK project to observe and monitor AWS SES in an account and region. Creates an Event Bridge Rule to log out all Email Bounced, Email Complaint Received, Email Rejected and Email Rendering Failed events to a CloudWatch Log Group. It also creates 3 CloudWatch Alarms.

## Architecture
The Overwatch SES project is designed to be deployed with minimal configuration. Upon deployment, the project automatically provisions the following components:

* **CloudWatch Alarms**:
  * HighBounceRateAlarm - Alerts when the bounce rate is above 4%.
  * HighComplaintRateAlarm - Alerts when the complaint rate is above 0.09%.
  * SendingQuotaUsageAlarm - Alerts when the usage of the sending quota is above 80%.

* **EventBridge Rule**: Rule to capture Email Bounced, Email Complaint Received, Email Rejected and Email Rendering Failed events and send them to the CloudWatch LogGroup.

* **CloudWatch Log Group**: Log groups are created to capture the logs generated by the Simple Email Service, enabling easy monitoring and troubleshooting.

## Deployment Process
### Prerequisites
Before you begin, ensure you have the following:
1. **AWS CLI** installed and configured with the necessary permissions.
2. **AWS CDK**
3. **Node.js**
4. **Git**
5. **pnpm**: Version 9.1.4 or later.

To setup and deploy the Overwatch-SES project, follow these steps:
1. **Clone the repository**:
   ```bash
   git clone git@github.com:truemark/overwatch-ses.git
   cd overwatch-ses
   ```
2. **Install the dependencies**:
   ```bash
   pnpm install
   ```
3. **Configure Region**
    ```bash
    export AWS_REGION=<region>
    ```
4. **Configure Keys and Session Token**
    ```bash
    export AWS_ACCESS_KEY_ID=<access_key>
    export AWS_SECRET_ACCESS_KEY=<secret_key>
    export AWS_SESSION_TOKEN=<session>
   ```
5. **Bootstrap the CDK**:
   ```bash
   cdk bootstrap
   ```
6. **Deploy the Stack**
   ```bash
   cd cdk; cdk deploy OverWatchSES
   ```
